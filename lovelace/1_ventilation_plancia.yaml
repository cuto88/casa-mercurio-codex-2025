---
title: "1 Ventilazione"
path: ventilation
icon: mdi:fan
type: panel
cards:
  - type: vertical-stack
    cards:

      # ==========================
      # BLOCCO 1 — STATO GENERALE
      # ==========================
      - type: entities
        title: "Ventilazione — Stato generale"
        show_header_toggle: false
        entities:
          - entity: input_boolean.vmc_enable
            name: "Logica VMC attiva"
          - entity: sensor.vmc_priority
            name: "Priorità VMC"
          - entity: sensor.vmc_reason
            name: "Motivo VMC"
          - entity: binary_sensor.vmc_failsafe_sensors_bad
            name: "Failsafe sensori VMC"
          - entity: sensor.vmc_freecooling_status
            name: "Stato freecooling"

      # ==========================
      # BLOCCO 2 — FREECOOLING
      # ==========================
      - type: entities
        title: "Freecooling — KPI"
        show_header_toggle: false
        entities:
          - entity: sensor.t_in_media
            name: "T interna media"
          - entity: sensor.t_out
            name: "T esterna"
          - entity: sensor.ah_in
            name: "AH interna"
          - entity: sensor.ah_out
            name: "AH esterna"
          - entity: sensor.delta_t_in_out
            name: "ΔT (int-ext)"
          - entity: sensor.delta_ah_in_out
            name: "ΔAH (int-ext)"
          - entity: input_number.vmc_freecooling_delta
            name: "Soglia ΔT freecooling"
          - entity: input_number.vmc_freecooling_delta_ah
            name: "Soglia ΔAH freecooling"

      # ==========================
      # BLOCCO 3 — CONSIGLI FINESTRE
      # ==========================
      - type: entities
        title: "Consigli finestre"
        show_header_toggle: false
        entities:
          - entity: binary_sensor.vent_condizioni_meteo_ok
            name: "Meteo OK per aprire"
          - entity: binary_sensor.vent_condizioni_termiche_ok
            name: "Termico OK (ΔT/ΔAH)"
          - entity: binary_sensor.vent_recommend_open
            name: "Suggerimento: APRI finestre"
          - entity: binary_sensor.vent_recommend_close
            name: "Suggerimento: CHIUDI finestre"
          - entity: sensor.windows_open_count
            name: "Finestre aperte"
          - entity: binary_sensor.windows_all_closed
            name: "Tutte chiuse"

      # ==========================
      # BLOCCO 4 — STATO FINESTRE
      # ==========================
      - type: entities
        title: "Stato finestre (input_boolean / contatti)"
        show_header_toggle: false
        entities:
          - entity: group.vent_windows_giorno
            name: "Zona giorno"
          - entity: group.vent_windows_notte
            name: "Zona notte"
          - entity: group.vent_windows_bagno
            name: "Bagno/Lavanderia"

      # ==========================
      # BLOCCO 5 — STORICO 24h
      # ==========================
      - type: history-graph
        title: "Trend 24h — VMC & Finestre"
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.t_in_media
            name: "T interna"
          - entity: sensor.t_out
            name: "T esterna"
          - entity: sensor.delta_t_in_out
            name: "ΔT int-ext"
          - entity: sensor.delta_ah_in_out
            name: "ΔAH int-ext"
          - entity: binary_sensor.vent_recommend_open
            name: "Suggerito APRI"
          - entity: binary_sensor.vent_recommend_close
            name: "Suggerito CHIUDI"
          - entity: binary_sensor.vmc_freecooling_active
            name: "VMC freecooling ON"
