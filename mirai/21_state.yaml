- sensor:
    - name: "MIRAI state"
      unique_id: mirai_state
      state: >
        {% if is_state('binary_sensor.mirai_status_word_bit_15','on') %}
          fault
        {% elif is_state('binary_sensor.mirai_status_word_bit_8','on') %}
          defrost
        {% elif is_state('binary_sensor.mirai_status_word_bit_4','on') %}
          dhw
        {% elif is_state('binary_sensor.mirai_status_word_bit_2','on') %}
          heating
        {% elif is_state('binary_sensor.mirai_status_word_bit_1','on') %}
          running
        {% else %}
          idle
        {% endif %}

    - name: "MIRAI fault active"
      unique_id: mirai_fault_active
      state: >
        {{ is_state('binary_sensor.mirai_status_word_bit_15','on') }}

    - name: "MIRAI mode"
      unique_id: mirai_mode
      state: >
        {% if is_state('binary_sensor.mirai_status_word_bit_4','on') %}
          dhw
        {% elif is_state('binary_sensor.mirai_status_word_bit_2','on') %}
          heating
        {% else %}
          standby
        {% endif %}
