title: "5 Consumi"
views:
  - title: "Consumi — Core"
    path: consumi-analyst
    icon: mdi:lightning-bolt
    type: sections
    max_columns: 3

    sections:
      - type: grid
        title: "Stato generale"
        cards:
          - type: glance
            columns: 3
            entities:
              - entity: binary_sensor.lavatrice_in_ciclo
                name: Lavatrice in ciclo
              - entity: binary_sensor.asciugatrice_in_ciclo
                name: Asciugatrice in ciclo
              - entity: binary_sensor.pm1_in_ciclo
                name: Romeo in ciclo

          - type: grid
            columns: 3
            square: false
            cards:
              - type: tile
                entity: sensor.pm2_mss310_power_w_main_channel
                name: Lavatrice — W
                state_color: true
              - type: tile
                entity: sensor.pm3_mss310_power_w_main_channel
                name: Asciugatrice — W
                state_color: true
              - type: tile
                entity: sensor.pm1_mss310_power_w_main_channel
                name: Romeo — W
                state_color: true

      - type: grid
        title: "KPI giornalieri"
        cards:
          - type: grid
            columns: 3
            square: false
            cards:
              - type: tile
                entity: sensor.pm2_energy_daily
                name: Lavatrice — kWh
              - type: tile
                entity: sensor.pm3_energy_daily
                name: Asciugatrice — kWh
              - type: tile
                entity: sensor.pm1_energy_daily
                name: Romeo — kWh

      - type: grid
        title: "Setpoint e soglie"
        cards:
          - type: entities
            show_header_toggle: false
            entities:
              - input_number.pm2_on_w
              - input_number.pm2_off_w
              - input_number.pm2_min_run_min
              - type: divider
              - input_number.pm3_on_w
              - input_number.pm3_off_w
              - input_number.pm3_min_run_min
              - type: divider
              - input_number.pm1_on_w
              - input_number.pm1_off_w
              - input_number.pm1_min_run_min

      - type: grid
        title: "Grafici 24h / 30gg"
        cards:
          - type: statistics-graph
            title: "kWh per ora (oggi)"
            chart_type: bar
            period: hour
            days_to_show: 1
            stat_types:
              - change
            entities:
              - entity: sensor.pm2_mss310_energy_kwh_main_channel
                name: Lavatrice
              - entity: sensor.pm3_mss310_energy_kwh_main_channel
                name: Asciugatrice
              - entity: sensor.pm1_mss310_energy_kwh_main_channel
                name: Romeo

          - type: history-graph
            title: "Potenza dispositivi (24h)"
            hours_to_show: 24
            entities:
              - entity: sensor.pm2_mss310_power_w_main_channel
                name: Lavatrice
              - entity: sensor.pm3_mss310_power_w_main_channel
                name: Asciugatrice
              - entity: sensor.pm1_mss310_power_w_main_channel
                name: Romeo

          - type: statistics-graph
            title: "kWh/giorno (30 giorni)"
            chart_type: bar
            period: day
            days_to_show: 30
            stat_types:
              - change
            entities:
              - entity: sensor.pm2_mss310_energy_kwh_main_channel
                name: Lavatrice
              - entity: sensor.pm3_mss310_energy_kwh_main_channel
                name: Asciugatrice
              - entity: sensor.pm1_mss310_energy_kwh_main_channel
                name: Romeo

      - type: grid
        title: "Runtime e cicli"
        cards:
          - type: entities
            entities:
              - entity: input_number.pm2_last_cycle_kwh
                name: Lavatrice — kWh ultimo ciclo
              - entity: input_datetime.pm2_last_start
                name: Lavatrice — ultimo start
              - entity: input_datetime.pm2_last_stop
                name: Lavatrice — ultimo stop
              - type: divider
              - entity: input_number.pm3_last_cycle_kwh
                name: Asciugatrice — kWh ultimo ciclo
              - entity: input_datetime.pm3_last_start
                name: Asciugatrice — ultimo start
              - entity: input_datetime.pm3_last_stop
                name: Asciugatrice — ultimo stop
              - type: divider
              - entity: input_number.pm1_last_cycle_kwh
                name: Romeo — kWh ultimo ciclo
              - entity: input_datetime.pm1_last_start
                name: Romeo — ultimo start
              - entity: input_datetime.pm1_last_stop
                name: Romeo — ultimo stop
              - type: divider
              - entity: input_number.pm2_cycles
                name: Lavatrice — conteggio
              - entity: input_number.pm3_cycles
                name: Asciugatrice — conteggio
              - entity: input_number.pm1_cycles
                name: Romeo — conteggio

      - type: grid
        title: "Debug"
        cards:
          - type: entities
            entities:
              - entity: sensor.pm2_power_mean_15m
                name: Lavatrice — potenza media 15m
              - entity: sensor.pm2_power_max_24h
                name: Lavatrice — picco 24h
              - type: divider
              - entity: sensor.pm3_power_mean_15m
                name: Asciugatrice — potenza media 15m
              - entity: sensor.pm3_power_max_24h
                name: Asciugatrice — picco 24h
              - type: divider
              - entity: sensor.pm1_power_mean_15m
                name: Romeo — potenza media 15m
              - entity: sensor.pm1_power_max_24h
                name: Romeo — picco 24h
              - type: divider
              - entity: sensor.pm2_mss310_power_w_main_channel
                name: Lavatrice — Power (W)
              - entity: sensor.pm2_mss310_energy_kwh_main_channel
                name: Lavatrice — Energy (kWh)
              - type: divider
              - entity: sensor.pm3_mss310_power_w_main_channel
                name: Asciugatrice — Power (W)
              - entity: sensor.pm3_mss310_energy_kwh_main_channel
                name: Asciugatrice — Energy (kWh)
              - type: divider
              - entity: sensor.pm1_mss310_power_w_main_channel
                name: Romeo — Power (W)
              - entity: sensor.pm1_mss310_energy_kwh_main_channel
                name: Romeo — Energy (kWh)
